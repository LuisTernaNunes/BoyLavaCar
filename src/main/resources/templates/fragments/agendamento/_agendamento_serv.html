<div th:fragment="etapa" xmlns:th="http://www.w3.org/1999/xhtml">
    <div id="servico" class="container d-none">
        <div class="card-body">
            <div class="alert alert-primary text-dark" role="alert">
                No dia escolhido leve seu carro até o nosso lava rápido ou informe onde buscá-lo.
            </div>

            <div class="row g-2">
                <!-- Wrapper principal dos serviços -->
                <div class="serv-wrapper d-flex flex-wrap justify-content-center gap-2" role="group">
                    <th:block th:each="cat, iterStat : ${categorias}">
                        <div th:id="'serv-' + ${iterStat.index}"
                             th:classappend="${iterStat.index != 0} ? 'd-none' : ''"
                             class="serv-container text-center">

                            <th:block th:each="serv, iterServ : ${cat.servicos}">
                                <input onclick="somaServco(this)" type="checkbox" class="btn-check"
                                       name="servico"
                                       th:value="${serv.id}"
                                       th:id="'serv' + ${iterStat.index} + '-' + ${iterServ.index}"
                                       th:data-valor="${serv.valor}">

                                <label class="btn btn-outline-primary"
                                       th:text="${serv.nome + ' - R$ ' + serv.valor}"
                                       th:for="'serv' + ${iterStat.index} + '-' + ${iterServ.index}"></label>
                            </th:block>
                        </div>
                    </th:block>
                </div>

                <!-- Botão próximo -->
                <div class="d-flex flex-wrap justify-content-center gap-2 mt-3" role="group">
                    <button type="button" onclick="mostrarEtapa('data')" class="btn w-100 w-sm-auto"
                            style="background-color: #2A22D1; color: white;">
                        Próximo
                    </button>
                </div>

                <!-- Valor total -->
                <div class="alert alert-primary text-dark d-flex align-items-center gap-2 mt-2" role="alert">
                    <p class="mb-0">Valor Total R$</p>
                    <p class="mb-0" id="valorTotal">0</p>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- CSS extra para centralizar os labels -->
<style>
    .serv-container label {
        display: inline-block;
        margin: 5px;
        min-width: 180px;  /* opcional para alinhamento */
        text-align: center;
    }
</style>
