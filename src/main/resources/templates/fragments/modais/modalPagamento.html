<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<body>
<div th:fragment="modal(agendamento, index)">
    <div class="modal fade" th:id="${'modalPagamento-' + index}" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" th:text="${agendamento.cliente.nome}">Título</h5>
                    <div class="text-start">
                        <span class=" pe-2 ">Total Pagar:   </span>
                        <span th:id="'valorTotal'+${index}" th:text="'R$ ' + ${#numbers.formatDecimal(agendamento.valorTotal, 2, 'COMMA', 2, 'POINT')}">Total Pagar:   </span>
                    </div>
                </div>
                <div class="modal-body">
                    <div class="container">
                            <div class="row row-cols-2">
                                <div class="p-1 col d-flex">
                                    <input type="radio" class="btn-check" th:name="${'pagamento'+index}"  th:id="${'dinheiro'+index}" value="Dinheiro" autocomplete="off">
                                    <label class="btn btn-primary d-flex flex-column align-items-center justify-content-center w-100 py-2" th:for="${'dinheiro'+index}">
                                        <img class="me-2" src="/img/pagamento/dinheiro.png" alt="Ícone pagamento" style="width:40px; height:40px; margin-bottom:8px;">
                                        <span class="me-2">Dinheiro</span>
                                    </label>
                                </div>
                                <div class="p-1 col d-flex">
                                    <input type="radio" class="btn-check" th:name="${'pagamento'+index}" value="Crédito"  th:id="${'credito'+index}" autocomplete="off">
                                    <label class="btn btn-primary d-flex flex-column align-items-center justify-content-center w-100 py-2" th:for="${'credito'+index}">
                                        <img class="me-2" src="/img/pagamento/cartao.png" alt="Ícone pagamento" style="width:40px; height:40px; margin-bottom:8px;">
                                        <span class="me-2">Crédito</span>
                                    </label>
                                </div>
                                <div class="p-1 col d-flex">
                                    <input type="radio" class="btn-check" th:name="${'pagamento'+index}" value="Débito" th:id="${'debito'+index}" autocomplete="off">
                                    <label class="btn btn-primary d-flex flex-column align-items-center justify-content-center w-100 py-2" th:for="${'debito'+index}">
                                        <img class="me-2" src="/img/pagamento/cartao.png" alt="Ícone pagamento" style="width:40px; height:40px; margin-bottom:8px;">
                                        <span class="me-2">Débito</span>
                                    </label>
                                </div>
                                <div class="p-1 col d-flex">
                                    <input type="radio" class="btn-check" th:name="${'pagamento'+index}" value="Pix" th:id="${'pix'+index}" autocomplete="off">
                                    <label class="btn btn-primary d-flex flex-column align-items-center justify-content-center w-100 py-2" th:for="${'pix'+index}">
                                        <img class="me-2" src="/img/pagamento/pix.png" alt="Ícone pagamento" style="width:40px; height:40px; margin-bottom:8px;">
                                        <span class="me-2">Pix</span>
                                    </label>
                                </div>
                            </div>
                            <div class="pe-3 d-flex gap-2">
                                <div class="col-auto">
                                    <label th:for="'valorPagamento'+'index'" class="visually-hidden">Valor</label>
                                    <input type="number" class="form-control" th:id="'valorPagamento'+ ${index}" th:value="${agendamento.valorTotal}">
                                </div>
                                <div class="col-auto">
                                    <button type="submit" class="btn btn-primary mb-3" th:onclick="'adicionarPagamento(' + ${index} + ',' + ${agendamento.valorTotal} + ',' + ${agendamento.id} + ')'">Adicionar Pagamento</button>
                                </div>
                            </div>
                            <input type="hidden" name="idAgendamento" value="${agendamento.id}">
                        <table  class="table table-bordered pe-2">
                            <tbody th:id="'tabela'+ ${index}">
                            </tbody>
                        </table>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Voltar</button>
                    <button th:id="'finalizar'+ ${index}" type="button" class="btn btn-primary" disabled>Finalizar</button>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
</html>